<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Relat√≥rio de Desempenho ‚Äì CEBRASPE PF (120 itens)</title>
  <style>
    :root { --fg:#111; --muted:#666; --bg:#fff; --card:#f6f7f9; --line:#e6e7ea; }
    *{ box-sizing:border-box; }
    body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--fg); background:var(--bg); }
    header{ padding:20px; border-bottom:1px solid var(--line); }
    h1{ margin:0 0 6px 0; font-size:18px; }
    .sub{ color:var(--muted); font-size:13px; }
    .wrap{ padding:16px; max-width:1200px; margin:0 auto; }

    /* Navega√ß√£o (2 p√°ginas no mesmo arquivo) */
    .nav{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
    .tab{ padding:10px 12px; border:1px solid var(--line); border-radius:12px; background:#fff; cursor:pointer; font-weight:700; font-size:14px; }
    .tab:hover{ background:#fafafa; }
    .tab.active{ background:var(--card); }
    .page{ display:none; }
    .page.active{ display:block; }

    .controls{ display:grid; gap:10px; grid-template-columns:repeat(12,1fr); margin-bottom:14px; }
    .control{ grid-column:span 3; background:var(--card); border:1px solid var(--line); border-radius:10px; padding:10px; }
    .control label{ display:block; font-size:12px; color:var(--muted); margin-bottom:6px; }
    .control select,.control input{ width:100%; padding:8px 10px; border:1px solid var(--line); border-radius:8px; background:#fff; font-size:14px; }
    .actions{ grid-column:span 12; display:flex; gap:10px; flex-wrap:wrap; }
    button{ padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:#fff; cursor:pointer; font-weight:600; }
    button:hover{ background:#fafafa; }

    .kpis{ display:grid; grid-template-columns:repeat(6,1fr); gap:10px; margin:14px 0 18px; }
    .kpi{ border:1px solid var(--line); border-radius:12px; padding:12px; background:#fff; }
    .kpi .v{ font-size:20px; font-weight:800; }
    .kpi .t{ font-size:12px; color:var(--muted); margin-top:4px; }

    table{ width:100%; border-collapse:collapse; border:1px solid var(--line); border-radius:12px; overflow:hidden; }
    thead th{ text-align:left; font-size:12px; color:var(--muted); background:var(--card); padding:10px; border-bottom:1px solid var(--line); cursor:pointer; user-select:none; }
    tbody td{ padding:10px; border-bottom:1px solid var(--line); vertical-align:top; font-size:14px; }
    tbody tr:hover{ background:#fafafa; }

    .tag{ display:inline-block; padding:3px 8px; border-radius:999px; font-size:12px; font-weight:700; border:1px solid var(--line); }
    .certo{ background:#e9f7ef; border-color:#bfe7ce; }
    .errado{ background:#fdecec; border-color:#f3b9b9; }
    .branco{ background:#fff7e6; border-color:#ffdca3; }
    .anulado{ background:#eef2ff; border-color:#c7d2fe; }

    .small{ font-size:12px; color:var(--muted); }
    footer{ padding:16px; color:var(--muted); font-size:12px; }

    /* P√°gina 2 (Ranking/Diagn√≥stico) */
    .card{ border:1px solid var(--line); border-radius:14px; background:#fff; padding:14px; margin:12px 0; }
    .card h2{ margin:0 0 8px 0; font-size:16px; }
    .card h3{ margin:14px 0 8px 0; font-size:14px; }
    .pillrow{ display:flex; gap:8px; flex-wrap:wrap; margin:8px 0 0; }
    .pill{ display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; border:1px solid var(--line); background:var(--card); font-size:12px; font-weight:700; }
    .ranklist{ margin:0; padding-left:18px; }
    .ranklist li{ margin:10px 0; }
    .meta{ color:var(--muted); font-size:12px; margin-top:6px; line-height:1.5; }
    .grid2{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }

    @media (max-width: 980px){
      .control{ grid-column:span 6; }
      .kpis{ grid-template-columns:repeat(3,1fr); }
      .grid2{ grid-template-columns:1fr; }
    }
    @media (max-width: 560px){
      .control{ grid-column:span 12; }
      .kpis{ grid-template-columns:repeat(2,1fr); }
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Relat√≥rio de Desempenho ‚Äì 120 itens</h1>
      <div class="sub">Duas abas no mesmo arquivo: (1) Tabela com filtros + CSV | (2) Ranking e diagn√≥stico. (Branco n√£o penaliza; Anulado n√£o conta.)</div>

      <div class="nav" role="tablist" aria-label="Navega√ß√£o">
        <button class="tab active" id="tabItens" type="button" aria-controls="pageItens" aria-selected="true">Itens (Tabela)</button>
        <button class="tab" id="tabRanking" type="button" aria-controls="pageRanking" aria-selected="false">Ranking & Diagn√≥stico</button>
      </div>
    </div>
  </header>

  <main class="wrap">

    <!-- ======= ABA 1: ITENS ======= -->
    <section class="page active" id="pageItens" role="tabpanel" aria-labelledby="tabItens">
      <section class="controls">
        <div class="control">
          <label for="fMateria">Mat√©ria</label>
          <select id="fMateria"></select>
        </div>
        <div class="control">
          <label for="fAssunto">Assunto</label>
          <select id="fAssunto"></select>
        </div>
        <div class="control">
          <label for="fResultado">Resultado</label>
          <select id="fResultado">
            <option value="">Todos</option>
            <option value="certo">certo</option>
            <option value="errado">errado</option>
            <option value="branco">branco</option>
            <option value="anulado">anulado</option>
          </select>
        </div>
        <div class="control">
          <label for="qSearch">Busca (n¬∫, mat√©ria, assunto)</label>
          <input id="qSearch" placeholder="ex.: Linux, 98, Direitos Humanos..." />
        </div>

        <div class="actions">
          <button id="btnReset" type="button">Limpar filtros</button>
          <button id="btnExport" type="button">Exportar CSV (itens filtrados)</button>
          <button id="btnGoRanking" type="button">üìä Ir para Ranking</button>
        </div>
      </section>

      <section class="kpis" id="kpis"></section>

      <section>
        <div class="small" id="hintSort">Clique no cabe√ßalho para ordenar (alternando asc/desc).</div>
        <table id="tbl">
          <thead>
            <tr>
              <th data-key="q">Q</th>
              <th data-key="materia">Mat√©ria</th>
              <th data-key="assunto">Assunto</th>
              <th data-key="resultado">Resultado</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </section>
    </section>

    <!-- ======= ABA 2: RANKING & DIAGN√ìSTICO ======= -->
    <section class="page" id="pageRanking" role="tabpanel" aria-labelledby="tabRanking">
      <div class="actions" style="margin:0 0 10px 0;">
        <button id="btnBackItens" type="button">‚¨Ö Voltar para Itens</button>
      </div>

      <div class="card">
        <h2>Regras do c√°lculo</h2>
        <ul class="ranklist">
          <li><b>Itens anulados</b> foram exclu√≠dos do c√°lculo.</li>
          <li><b>Brancos</b> n√£o entram como erro nem como acerto.</li>
          <li><b>M√©trica principal</b>: % de acertos sobre o que era <b>pontu√°vel</b> na mat√©ria.</li>
        </ul>
      </div>

      <div class="card">
        <h2>ü•á Ranking geral (do melhor para o pior)</h2>
        <ol class="ranklist">
          <li>
            <b>Forense Digital (incidente, nuvem e VMs) ‚Äî 100%</b><br/>
            <span class="meta">Itens v√°lidos: 12 | Acertos: 12 | Erros: 0 | Brancos: 0</span>
            <div class="meta"><b>Voc√™ domina muito bem:</b> cadeia de cust√≥dia; an√°lise de incidentes; evid√™ncias em nuvem; vest√≠gios em VMs e ransomware. <b>üëâ Maior ativo t√©cnico para o cargo.</b></div>
          </li>
          <li>
            <b>Direitos Humanos ‚Äî 100%</b><br/>
            <span class="meta">V√°lidos: 6 | Acertos: 6 | Erros: 0 | Brancos: 0</span>
            <div class="meta">Base jur√≠dica s√≥lida em tratados internacionais e STF.</div>
          </li>
          <li>
            <b>Android / iOS ‚Äî 100%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 2 | Erros: 0</span>
            <div class="meta">Boa leitura sobre sandbox, ASLR e arquitetura m√≥vel.</div>
          </li>
          <li>
            <b>Estruturas de dados, SonarQube e Complexidade ‚Äî 100%</b><br/>
            <span class="meta">V√°lidos: 3 | Acertos: 3</span>
            <div class="meta">Base te√≥rica consistente (stack, QualityGate e Big-O).</div>
          </li>
          <li>
            <b>Penal (tempo e lugar do crime) ‚Äî 100%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 2</span>
            <div class="meta">Perfeito em teoria da atividade e ubiquidade.</div>
          </li>
          <li>
            <b>Windows/Excel ‚Äî 100%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 2</span>
          </li>
          <li>
            <b>Criminal√≠stica (busca e cadeia de cust√≥dia) ‚Äî 100%</b><br/>
            <span class="meta">V√°lidos: 3 | Acertos: 3</span>
          </li>
          <li>
            <b>Esteganografia ‚Äî 100%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 2</span>
          </li>
          <li>
            <b>NoSQL ‚Äî 66,7%</b><br/>
            <span class="meta">V√°lidos: 3 | Acertos: 2 | Erros: 1 | Brancos: 1</span>
            <div class="meta">Errou o item sobre ACID distribu√≠do; deixou em branco grafos.</div>
          </li>
          <li>
            <b>Forense Mobile ‚Äî 66,7%</b><br/>
            <span class="meta">V√°lidos: 3 | Acertos: 2 | Brancos: 1 (115)</span>
            <div class="meta">Acertou cache e identifica√ß√£o do SO; deixou EXIF em branco.</div>
          </li>
          <li>
            <b>Portugu√™s (texto e coes√£o) ‚Äî 62,5%</b><br/>
            <span class="meta">V√°lidos: 8 | Acertos: 5 | Erros: 3</span>
            <div class="meta">Compreende bem o texto, mas cai em detalhes gramaticais.</div>
          </li>
          <li>
            <b>Per√≠cia (imagem e bal√≠stica) ‚Äî 66,7%</b><br/>
            <span class="meta">V√°lidos: 3 | Acertos: 2</span>
            <div class="meta">Obs.: o item de sinais de disparo encostado foi anulado no gabarito.</div>
          </li>
          <li>
            <b>Reda√ß√£o Oficial ‚Äî 50%</b><br/>
            <span class="meta">V√°lidos: 4 | Acertos: 2 | Erros: 2</span>
            <div class="meta">Revisar fechos, cabe√ßalhos e padr√£o oficial.</div>
          </li>
          <li>
            <b>Licita√ß√µes ‚Äî 50%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 1 | Brancos: 1</span>
            <div class="meta">Acertou inexigibilidade; deixou SRP em branco.</div>
          </li>
          <li>
            <b>NAT / Redes ‚Äî 50%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 1 | Erros: 1</span>
            <div class="meta">Errou o papel do DHCP na tradu√ß√£o NAT.</div>
          </li>
          <li>
            <b>DNSSEC ‚Äî 50%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 1 | Brancos: 1</span>
            <div class="meta">Deixou KSK em branco.</div>
          </li>
          <li>
            <b>Criptografia (Twofish/MITM) ‚Äî 50%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 1 | Brancos: 1</span>
            <div class="meta">Acertou MITM/DH; deixou Twofish em branco.</div>
          </li>
          <li>
            <b>Engenharia Reversa ‚Äî 50%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 1 | Brancos: 1</span>
            <div class="meta">Acertou control flow flattening; deixou ISA extension.</div>
          </li>
          <li>
            <b>Bancos de Dados ‚Äî 40%</b><br/>
            <span class="meta">V√°lidos: 5 | Acertos: 2 | Erros: 2 | Brancos: 1</span>
            <div class="meta">Pontos fracos: agrega√ß√£o (OLAP) e recupera√ß√£o de falhas.</div>
          </li>
          <li>
            <b>L√≥gica ‚Äî 40%</b><br/>
            <span class="meta">V√°lidos: 5 | Acertos: 2 | Erros: 3</span>
            <div class="meta">Acertou cobertura e condicional final; errou equival√™ncias e infer√™ncias.</div>
          </li>
          <li>
            <b>Seguran√ßa da Informa√ß√£o / Big Data / ML ‚Äî 16,7%</b><br/>
            <span class="meta">V√°lidos: 6 | Acertos: 1 | Brancos: 3 | Erros: 2</span>
            <div class="meta">Pior bloco no B√°sico.</div>
          </li>
          <li>
            <b>Arquitetura e Mem√≥ria ‚Äî 0%</b><br/>
            <span class="meta">V√°lidos: 4 | Acertos: 0 | Brancos: 3 | Erros: 1</span>
            <div class="meta">Ponto mais cr√≠tico dos Espec√≠ficos.</div>
          </li>
          <li>
            <b>RAID / NTFS ‚Äî 0%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 0 | Erros: 2</span>
          </li>
          <li>
            <b>POO e Programa√ß√£o Procedural ‚Äî 0%</b><br/>
            <span class="meta">V√°lidos: 3 | Acertos: 0 | Brancos: 1 | Erros: 2</span>
          </li>
          <li>
            <b>Web e APIs ‚Äî 0%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 0 | Erros: 2</span>
          </li>
          <li>
            <b>SSH/HTTPS ‚Äî 0%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 0 | Erros: 1 | Anulado: 1</span>
          </li>
          <li>
            <b>WPA3 ‚Äî 0%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 0 | Erros: 2</span>
          </li>
          <li>
            <b>Linux ‚Äî 0%</b><br/>
            <span class="meta">V√°lidos: 3 | Acertos: 0 | Brancos: 2 | Erros: 1</span>
            <div class="meta">Permiss√µes, systemd e dmesg: revis√£o urgente.</div>
          </li>
          <li>
            <b>Governan√ßa de TI / Marco Civil ‚Äî 0%</b><br/>
            <span class="meta">V√°lidos: 2 | Acertos: 0 | Erros: 2</span>
          </li>
        </ol>
      </div>

      <div class="grid2">
        <div class="card">
          <h2>üéØ Diagn√≥stico final</h2>
          <h3>‚úÖ Seus superpoderes</h3>
          <div class="pillrow">
            <span class="pill">Forense digital pr√°tica</span>
            <span class="pill">Direitos Humanos</span>
            <span class="pill">Android/iOS</span>
            <span class="pill">Cadeia de cust√≥dia</span>
            <span class="pill">Estruturas de dados</span>
          </div>

          <h3>‚ö†Ô∏è Fragilidades cr√≠ticas</h3>
          <div class="pillrow">
            <span class="pill">Arquitetura de computadores</span>
            <span class="pill">Linux</span>
            <span class="pill">RAID/NTFS</span>
            <span class="pill">Seguran√ßa/Big Data</span>
            <span class="pill">POO e programa√ß√£o</span>
            <span class="pill">Web/APIs</span>
            <span class="pill">WPA3</span>
          </div>
        </div>

        <div class="card">
          <h2>Como usar no GitHub Pages</h2>
          <ol class="ranklist">
            <li>Crie um reposit√≥rio (ex.: <b>relatorio-prova</b>).</li>
            <li>Salve este arquivo como <b>index.html</b> na raiz.</li>
            <li>V√° em <b>Settings ‚Üí Pages</b>.</li>
            <li>Em ‚ÄúBuild and deployment‚Äù, escolha <b>Deploy from a branch</b>.</li>
            <li>Selecione a branch (<b>main</b>) e a pasta (<b>/root</b>), e salve.</li>
          </ol>
          <div class="meta">Pronto: voc√™ ter√° uma URL p√∫blica com as duas abas dentro do mesmo arquivo.</div>
        </div>
      </div>
    </section>

  </main>

  <footer class="wrap">
    Dica: publique este arquivo como <b>index.html</b> no GitHub Pages (Settings ‚Üí Pages ‚Üí Deploy from branch).
  </footer>

  <script>
    // ======= DADOS (120 itens) =======
    // Resultado: "certo" | "errado" | "branco" | "anulado"
    const data = [
      {q:1, materia:"Portugu√™s", assunto:"Interpreta√ß√£o de texto", resultado:"certo"},
      {q:2, materia:"Portugu√™s", assunto:"Interpreta√ß√£o de texto", resultado:"certo"},
      {q:3, materia:"Portugu√™s", assunto:"Interpreta√ß√£o de texto", resultado:"errado"},
      {q:4, materia:"Portugu√™s", assunto:"Interpreta√ß√£o de texto", resultado:"errado"},
      {q:5, materia:"Portugu√™s", assunto:"Interpreta√ß√£o de texto", resultado:"certo"},
      {q:6, materia:"Portugu√™s", assunto:"Coes√£o textual", resultado:"certo"},
      {q:7, materia:"Portugu√™s", assunto:"Pontua√ß√£o", resultado:"certo"},
      {q:8, materia:"Portugu√™s", assunto:"Reg√™ncia verbal", resultado:"errado"},
      {q:9, materia:"Reda√ß√£o Oficial", assunto:"Fechos oficiais", resultado:"certo"},
      {q:10, materia:"Reda√ß√£o Oficial", assunto:"Exposi√ß√£o de motivos", resultado:"certo"},
      {q:11, materia:"Reda√ß√£o Oficial", assunto:"Cabe√ßalho em expedientes", resultado:"errado"},
      {q:12, materia:"Reda√ß√£o Oficial", assunto:"Padr√£o oficial de linguagem", resultado:"errado"},
      {q:13, materia:"Windows/Excel", assunto:"Sistema de arquivos (Windows)", resultado:"certo"},
      {q:14, materia:"Windows/Excel", assunto:"Auditoria de f√≥rmulas (Excel)", resultado:"certo"},
      {q:15, materia:"Seg. da Informa√ß√£o / Dados", assunto:"Data mining (clustering)", resultado:"branco"},
      {q:16, materia:"Seg. da Informa√ß√£o / Dados", assunto:"Big Data (5Vs)", resultado:"branco"},
      {q:17, materia:"Seg. da Informa√ß√£o / Dados", assunto:"Firewall e antiv√≠rus", resultado:"certo"},
      {q:18, materia:"Seg. da Informa√ß√£o / Dados", assunto:"Zero-day", resultado:"anulado"},
      {q:19, materia:"Bancos de Dados", assunto:"Normaliza√ß√£o", resultado:"anulado"},
      {q:20, materia:"Bancos de Dados", assunto:"Cardinalidade", resultado:"branco"},
      {q:21, materia:"Adm. P√∫blica", assunto:"Autarquias", resultado:"certo"},
      {q:22, materia:"Adm. P√∫blica", assunto:"Descentraliza√ß√£o", resultado:"errado"},
      {q:23, materia:"Licita√ß√µes", assunto:"Sistema de registro de pre√ßos (SRP)", resultado:"branco"},
      {q:24, materia:"Licita√ß√µes", assunto:"Inexigibilidade", resultado:"certo"},
      {q:25, materia:"Constitucional", assunto:"Seguran√ßa p√∫blica", resultado:"certo"},
      {q:26, materia:"Constitucional", assunto:"Partidos pol√≠ticos", resultado:"errado"},
      {q:27, materia:"Constitucional", assunto:"Direito √† vida / pena de morte", resultado:"certo"},
      {q:28, materia:"Constitucional", assunto:"Presidencialismo", resultado:"certo"},
      {q:29, materia:"Direito Penal", assunto:"Lugar do crime (ubiquidade)", resultado:"certo"},
      {q:30, materia:"Direito Penal", assunto:"Tempo do crime (teoria da atividade)", resultado:"certo"},
      {q:31, materia:"Inqu√©rito", assunto:"Dilig√™ncias / per√≠cia", resultado:"anulado"},
      {q:32, materia:"Processo Penal", assunto:"Assistente t√©cnico e acesso ao material", resultado:"certo"},
      {q:33, materia:"Processo Penal", assunto:"Busca domiciliar com consentimento", resultado:"certo"},
      {q:34, materia:"Criminal√≠stica", assunto:"Cadeia de cust√≥dia (in√≠cio)", resultado:"certo"},
      {q:35, materia:"Criminal√≠stica", assunto:"Vest√≠gios morfol√≥gicos", resultado:"errado"},
      {q:36, materia:"Criminal√≠stica", assunto:"Princ√≠pio de Locard", resultado:"certo"},
      {q:37, materia:"Per√≠cia", assunto:"Imagem raster e pixeliza√ß√£o", resultado:"certo"},
      {q:38, materia:"Bal√≠stica", assunto:"Efeitos secund√°rios (tiro encostado)", resultado:"anulado"},
      {q:39, materia:"Per√≠cia", assunto:"Isolamento do local", resultado:"certo"},
      {q:40, materia:"Direitos Humanos", assunto:"Refugiados (trabalho/profiss√µes)", resultado:"certo"},
      {q:41, materia:"Direitos Humanos", assunto:"Regras m√≠nimas ONU (pessoas presas)", resultado:"certo"},
      {q:42, materia:"Direitos Humanos", assunto:"Tratados de DH (status supralegal)", resultado:"certo"},
      {q:43, materia:"Direitos Humanos", assunto:"CEDAW (nacionalidade)", resultado:"certo"},
      {q:44, materia:"Direitos Humanos", assunto:"Duplo grau (CADH)", resultado:"certo"},
      {q:45, materia:"Direitos Humanos", assunto:"Subsidiariedade (sistema interamericano)", resultado:"certo"},
      {q:46, materia:"L√≥gica", assunto:"Cobertura por c√¢meras (contagem)", resultado:"certo"},
      {q:47, materia:"L√≥gica", assunto:"Infer√™ncia condicional", resultado:"errado"},
      {q:48, materia:"L√≥gica", assunto:"Contradi√ß√£o / proposi√ß√£o", resultado:"errado"},
      {q:49, materia:"L√≥gica", assunto:"Equival√™ncia l√≥gica", resultado:"errado"},
      {q:50, materia:"L√≥gica", assunto:"Implica√ß√£o (nega√ß√£o/alternativa)", resultado:"certo"},

      {q:51, materia:"Arquitetura / Virtualiza√ß√£o", assunto:"Paravirtualiza√ß√£o", resultado:"branco"},
      {q:52, materia:"Arquitetura / Virtualiza√ß√£o", assunto:"Mem√≥ria flash (volatilidade)", resultado:"errado"},
      {q:53, materia:"Arquitetura / Virtualiza√ß√£o", assunto:"Pagina√ß√£o (p√°ginas/frames)", resultado:"branco"},
      {q:54, materia:"Sistemas de Arquivos", assunto:"Journaling (Ext4/ReiserFS)", resultado:"branco"},
      {q:55, materia:"RAID/NTFS", assunto:"Bad clusters / estruturas", resultado:"errado"},
      {q:56, materia:"RAID/NTFS", assunto:"RAID 0 (striping)", resultado:"errado"},
      {q:57, materia:"Bancos de Dados", assunto:"Agrega√ß√£o multidimensional (OLAP)", resultado:"branco"},
      {q:58, materia:"Bancos de Dados", assunto:"Modelo l√≥gico relacional", resultado:"certo"},
      {q:59, materia:"Bancos de Dados", assunto:"SQLite (usu√°rios/permiss√µes)", resultado:"certo"},
      {q:60, materia:"Bancos de Dados", assunto:"Recupera√ß√£o p√≥s-falha / checkpoint", resultado:"errado"},
      {q:61, materia:"Bancos de Dados", assunto:"SQL (outer joins)", resultado:"errado"},
      {q:62, materia:"NoSQL", assunto:"Escalabilidade horizontal", resultado:"certo"},
      {q:63, materia:"NoSQL", assunto:"ACID em distribu√≠do", resultado:"certo"},
      {q:64, materia:"NoSQL", assunto:"Banco de grafos", resultado:"branco"},
      {q:65, materia:"Engenharia Reversa", assunto:"Control flow flattening", resultado:"certo"},
      {q:66, materia:"Engenharia Reversa", assunto:"ISA extension / suporte de descompilador", resultado:"branco"},
      {q:67, materia:"Malware", assunto:"Sandbox (conceito)", resultado:"certo"},
      {q:68, materia:"Malware", assunto:"An√°lise est√°tica vs din√¢mica", resultado:"errado"},
      {q:69, materia:"Programa√ß√£o (POO/Procedural)", assunto:"Tipos (int/char) e struct", resultado:"branco"},
      {q:70, materia:"Programa√ß√£o (POO/Procedural)", assunto:"Heran√ßa m√∫ltipla (Java/C#)", resultado:"errado"},
      {q:71, materia:"Programa√ß√£o (POO/Procedural)", assunto:"Arrays (tipos homog√™neos)", resultado:"errado"},
      {q:72, materia:"Java", assunto:"Bytecode/JVM (portabilidade)", resultado:"certo"},
      {q:73, materia:"JavaScript", assunto:"Execu√ß√£o no navegador", resultado:"certo"},
      {q:74, materia:"Web/APIs", assunto:"GraphQL (consultas)", resultado:"errado"},
      {q:75, materia:"Web/APIs", assunto:"REST stateless", resultado:"errado"},
      {q:76, materia:"Estruturas de Dados", assunto:"Pilha (recurs√£o)", resultado:"certo"},
      {q:77, materia:"SonarQube", assunto:"Quality Gate", resultado:"certo"},
      {q:78, materia:"Algoritmos", assunto:"Complexidade O(n) vs O(n log n)", resultado:"certo"},
      {q:79, materia:"Redes", assunto:"HTTPS no modelo TCP/IP", resultado:"errado"},
      {q:80, materia:"Redes", assunto:"SSHv2 (sess√µes)", resultado:"anulado"},
      {q:81, materia:"OWASP", assunto:"Coment√°rio SQL (--)", resultado:"errado"},
      {q:82, materia:"OWASP", assunto:"SQLi (interpreta√ß√£o da query)", resultado:"certo"},
      {q:83, materia:"OAuth/OIDC", assunto:"OIDC sobre OAuth 2.0", resultado:"errado"},
      {q:84, materia:"OAuth/OIDC", assunto:"OAuth exp√µe senha?", resultado:"certo"},
      {q:85, materia:"Esteganografia", assunto:"Uso em forense / assinatura digital", resultado:"certo"},
      {q:86, materia:"Esteganografia", assunto:"LSB", resultado:"certo"},
      {q:87, materia:"Redes", assunto:"NAT e DHCP", resultado:"errado"},
      {q:88, materia:"Redes", assunto:"NAT (tradu√ß√£o/estado)", resultado:"certo"},
      {q:89, materia:"DNSSEC", assunto:"KSK assina ZSK", resultado:"branco"},
      {q:90, materia:"DNSSEC", assunto:"ZSK assina registros", resultado:"certo"},
      {q:91, materia:"WPA3", assunto:"SAE (resist√™ncia a dicion√°rio)", resultado:"errado"},
      {q:92, materia:"WPA3", assunto:"OWE (uso)", resultado:"errado"},
      {q:93, materia:"Criptografia", assunto:"Diffie-Hellman e MITM", resultado:"certo"},
      {q:94, materia:"Criptografia", assunto:"Twofish (Feistel/rodadas)", resultado:"branco"},
      {q:95, materia:"Windows Server 2022", assunto:"DoH (DNS-over-HTTPS)", resultado:"certo"},
      {q:96, materia:"Windows Server 2022", assunto:"Secured-core server", resultado:"branco"},
      {q:97, materia:"Linux", assunto:"Logs (/var/log/dmesg)", resultado:"errado"},
      {q:98, materia:"Linux", assunto:"Permiss√µes (chmod)", resultado:"branco"},
      {q:99, materia:"Linux", assunto:"systemd/journalctl", resultado:"branco"},
      {q:100, materia:"Android", assunto:"UID e sandbox", resultado:"certo"},
      {q:101, materia:"iOS", assunto:"ASLR", resultado:"certo"},
      {q:102, materia:"Governan√ßa / Licita√ß√µes", assunto:"Lei 14.133 (hip√≥tese de contrata√ß√£o)", resultado:"errado"},
      {q:103, materia:"Marco Civil", assunto:"Responsabiliza√ß√£o do provedor", resultado:"errado"},
      {q:104, materia:"IA", assunto:"Deepfakes/GAN", resultado:"errado"},
      {q:105, materia:"IA", assunto:"LLM (defini√ß√£o)", resultado:"certo"},
      {q:106, materia:"Forense (incidente)", assunto:"Criptografia ponta a ponta", resultado:"certo"},
      {q:107, materia:"Forense (incidente)", assunto:"Coleta e isolamento", resultado:"certo"},
      {q:108, materia:"Forense (incidente)", assunto:"Cadeia de cust√≥dia (visualiza√ß√£o)", resultado:"certo"},
      {q:109, materia:"Forense (incidente)", assunto:"Metadados e logs", resultado:"certo"},
      {q:110, materia:"Forense (nuvem)", assunto:"Impress√£o (rastros)", resultado:"certo"},
      {q:111, materia:"Forense (nuvem)", assunto:"Arquivos de configura√ß√£o", resultado:"certo"},
      {q:112, materia:"Forense (nuvem)", assunto:"Acordos/legisla√ß√£o", resultado:"certo"},
      {q:113, materia:"Forense (nuvem)", assunto:"Autoriza√ß√£o judicial", resultado:"certo"},
      {q:114, materia:"Forense (mobile)", assunto:"Caches/hist√≥rico", resultado:"certo"},
      {q:115, materia:"Forense (mobile)", assunto:"EXIF", resultado:"branco"},
      {q:116, materia:"Forense (mobile)", assunto:"Vers√£o do SO", resultado:"certo"},
      {q:117, materia:"Forense (VMs/Ransomware)", assunto:"Vest√≠gios (tarefas/registro)", resultado:"certo"},
      {q:118, materia:"Forense (VMs/Ransomware)", assunto:"Proporcionalidade", resultado:"certo"},
      {q:119, materia:"Forense (VMs/Ransomware)", assunto:"Hash na duplica√ß√£o", resultado:"certo"},
      {q:120, materia:"Forense (VMs/Ransomware)", assunto:"Logs/snapshots/.vmdk", resultado:"certo"},
    ];

    // ======= ESTADO (ordenacao) =======
    let sortKey = "q";
    let sortDir = "asc"; // "asc" | "desc"

    // ======= HELPERS =======
    const uniq = (arr) => [...new Set(arr)].sort((a,b)=>a.localeCompare(b,"pt-BR"));
    const tagClass = (r) => (r === "certo" ? "certo" : r === "errado" ? "errado" : r === "branco" ? "branco" : "anulado");

    function computeStats(rows){
      const stats = { total: rows.length, certo:0, errado:0, branco:0, anulado:0, validos:0, respondidos:0 };
      for(const r of rows){ stats[r.resultado] = (stats[r.resultado]||0) + 1; }
      stats.validos = stats.total - stats.anulado;
      stats.respondidos = stats.validos - stats.branco; // branco n√£o respondido
      stats.acuracia = stats.respondidos > 0 ? (stats.certo / stats.respondidos) * 100 : 0;
      stats.aproveitamento = stats.validos > 0 ? (stats.certo / stats.validos) * 100 : 0;
      return stats;
    }

    function renderKpis(rows){
      const s = computeStats(rows);
      const el = document.getElementById("kpis");
      el.innerHTML = `
        <div class="kpi"><div class="v">${s.total}</div><div class="t">Itens (filtrados)</div></div>
        <div class="kpi"><div class="v">${s.validos}</div><div class="t">V√°lidos (sem anulado)</div></div>
        <div class="kpi"><div class="v">${s.certo}</div><div class="t">Acertos</div></div>
        <div class="kpi"><div class="v">${s.errado}</div><div class="t">Erros</div></div>
        <div class="kpi"><div class="v">${s.branco}</div><div class="t">Brancos</div></div>
        <div class="kpi"><div class="v">${s.acuracia.toFixed(2)}%</div><div class="t">Acur√°cia (sobre respondidos)</div></div>
      `;
    }

    function populateFilters(){
      const materias = uniq(data.map(d=>d.materia));
      const fMateria = document.getElementById("fMateria");
      fMateria.innerHTML = `<option value="">Todas</option>` + materias.map(m=>`<option value="${escapeHtml(m)}">${escapeHtml(m)}</option>`).join("");
      updateAssuntoOptions();
    }

    function updateAssuntoOptions(){
      const fMateriaVal = document.getElementById("fMateria").value;
      const base = fMateriaVal ? data.filter(d=>d.materia === fMateriaVal) : data;
      const assuntos = uniq(base.map(d=>d.assunto));
      const fAssunto = document.getElementById("fAssunto");
      const current = fAssunto.value || "";
      fAssunto.innerHTML = `<option value="">Todos</option>` + assuntos.map(a=>`<option value="${escapeHtml(a)}">${escapeHtml(a)}</option>`).join("");
      if (assuntos.includes(current)) fAssunto.value = current;
    }

    function getFiltered(){
      const m = document.getElementById("fMateria").value;
      const a = document.getElementById("fAssunto").value;
      const r = document.getElementById("fResultado").value;
      const q = document.getElementById("qSearch").value.trim().toLowerCase();

      let rows = data.slice();
      if (m) rows = rows.filter(d=>d.materia === m);
      if (a) rows = rows.filter(d=>d.assunto === a);
      if (r) rows = rows.filter(d=>d.resultado === r);

      if (q){
        rows = rows.filter(d=>{
          const hay = `${d.q} ${d.materia} ${d.assunto} ${d.resultado}`.toLowerCase();
          return hay.includes(q);
        });
      }

      rows.sort((x,y)=>{
        const vx = x[sortKey];
        const vy = y[sortKey];
        let cmp = 0;
        if (typeof vx === "number" && typeof vy === "number") cmp = vx - vy;
        else cmp = String(vx).localeCompare(String(vy),"pt-BR");
        return sortDir === "asc" ? cmp : -cmp;
      });

      return rows;
    }

    function renderTable(rows){
      const tbody = document.getElementById("tbody");
      tbody.innerHTML = rows.map(d=>`
        <tr>
          <td><b>${d.q}</b></td>
          <td>${escapeHtml(d.materia)}</td>
          <td>${escapeHtml(d.assunto)}</td>
          <td><span class="tag ${tagClass(d.resultado)}">${d.resultado}</span></td>
        </tr>
      `).join("");
    }

    function resetFilters(){
      document.getElementById("fMateria").value = "";
      document.getElementById("fResultado").value = "";
      document.getElementById("qSearch").value = "";
      updateAssuntoOptions();
      document.getElementById("fAssunto").value = "";
      refresh();
    }

    function refresh(){
      const rows = getFiltered();
      renderKpis(rows);
      renderTable(rows);
    }

    // ======= EXPORT CSV =======
    function toCsv(rows){
      const header = ["questao","materia","assunto","resultado"];
      const lines = [header.join(",")];
      for(const d of rows){
        lines.push([
          d.q,
          csvEscape(d.materia),
          csvEscape(d.assunto),
          d.resultado
        ].join(","));
      }
      return lines.join("\n");
    }

    function downloadText(filename, content, mime="text/plain;charset=utf-8"){
      const blob = new Blob([content], {type:mime});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    function exportCsv(){
      const rows = getFiltered();
      const csv = toCsv(rows);
      const stamp = new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");
      downloadText(`relatorio-itens-${stamp}.csv`, csv, "text/csv;charset=utf-8");
    }

    // ======= SEGURAN√áA B√ÅSICA (escape) =======
    function escapeHtml(s){
      return String(s)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }
    function csvEscape(s){
      const v = String(s);
      if (/[,"\n]/.test(v)) return `"${v.replaceAll('"','""')}"`;
      return v;
    }

    // ======= NAVEGA√á√ÉO (abas) =======
    function showPage(which){
      const tabItens = document.getElementById("tabItens");
      const tabRanking = document.getElementById("tabRanking");
      const pageItens = document.getElementById("pageItens");
      const pageRanking = document.getElementById("pageRanking");

      const isItens = which === "itens";
      tabItens.classList.toggle("active", isItens);
      tabRanking.classList.toggle("active", !isItens);

      tabItens.setAttribute("aria-selected", String(isItens));
      tabRanking.setAttribute("aria-selected", String(!isItens));

      pageItens.classList.toggle("active", isItens);
      pageRanking.classList.toggle("active", !isItens);

      window.scrollTo({top:0, behavior:"auto"});
    }

    // ======= EVENTOS =======
    populateFilters();

    document.getElementById("fMateria").addEventListener("change", () => { updateAssuntoOptions(); refresh(); });
    document.getElementById("fAssunto").addEventListener("change", refresh);
    document.getElementById("fResultado").addEventListener("change", refresh);
    document.getElementById("qSearch").addEventListener("input", () => {
      window.clearTimeout(window.__t);
      window.__t = window.setTimeout(refresh, 120);
    });

    document.getElementById("btnReset").addEventListener("click", resetFilters);
    document.getElementById("btnExport").addEventListener("click", exportCsv);

    document.querySelectorAll("thead th[data-key]").forEach(th=>{
      th.addEventListener("click", ()=>{
        const key = th.getAttribute("data-key");
        if (sortKey === key) sortDir = (sortDir === "asc" ? "desc" : "asc");
        else { sortKey = key; sortDir = "asc"; }
        refresh();
      });
    });

    document.getElementById("tabItens").addEventListener("click", ()=>showPage("itens"));
    document.getElementById("tabRanking").addEventListener("click", ()=>showPage("ranking"));
    document.getElementById("btnGoRanking").addEventListener("click", ()=>showPage("ranking"));
    document.getElementById("btnBackItens").addEventListener("click", ()=>showPage("itens"));

    refresh();
  </script>
</body>
</html>
